{"version":3,"file":"vue3-calendar-heatmap.umd.js","sources":["../src/components/Heatmap.ts","../src/components/CalendarHeatmap.vue","../src/index.ts"],"sourcesContent":["export interface Value {\n\tdate: Date | string;\n\tcount: number;\n}\n\nexport interface Activity {\n\tcount: number;\n\tcolorIndex: number;\n}\n\nexport type Activities = Map<string, Activity>;\n\nexport interface CalendarItem {\n\tdate: Date;\n\tcount?: number;\n\tcolorIndex: number;\n}\n\nexport type Calendar = CalendarItem[][];\n\nexport interface Month {\n\tvalue: number;\n\tindex: number;\n}\n\nexport interface Locale {\n\tmonths: string[];\n\tdays: string[];\n\ton: string;\n\tless: string;\n\tmore: string;\n}\n\nexport type TooltipFormatter = (item: CalendarItem, unit: string) => string;\n\nexport class Heatmap {\n\n\tstatic readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#dae2ef', '#c0ddf9', '#73b3f3', '#3886e1', '#17459e' ];\n\tstatic readonly DEFAULT_RANGE_COLOR_DARK  = [ '#1f1f22', '#1e334a', '#1d466c', '#1d5689', '#1d69ac', '#1B95D1' ];\n\t// other color candidates\n\t// static readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#9be9a8', '#40c463', '#30a14e', '#216e39' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK  = [ '#161b22', '#0e4429', '#006d32', '#26a641', '#39d353' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#011526', '#012E40', '#025959', '#02735E', '#038C65' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#161b22', '#015958', '#008F8C', '#0CABA8', '#0FC2C0' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#012030', '#13678A', '#45C4B0', '#9AEBA3', '#DAFDBA' ];\n\tstatic readonly DEFAULT_LOCALE: Locale = {\n\t\tmonths: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],\n\t\tdays  : [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],\n\t\ton    : 'on',\n\t\tless  : 'Less',\n\t\tmore  : 'More'\n\t};\n\tstatic readonly DEFAULT_TOOLTIP_UNIT   = 'contributions';\n\tstatic readonly DAYS_IN_ONE_YEAR       = 365;\n\tstatic readonly DAYS_IN_WEEK           = 7;\n\tstatic readonly SQUARE_SIZE            = 10;\n\n\tstartDate: Date;\n\tendDate: Date;\n\tmax: number;\n\n\tprivate _values: Value[];\n\tprivate _firstFullWeekOfMonths?: Month[];\n\tprivate _activities?: Activities;\n\tprivate _calendar?: Calendar;\n\n\tconstructor(endDate: Date | string, values: Value[], max?: number) {\n\t\tthis.endDate   = this.parseDate(endDate);\n\t\tthis.max       = max || Math.ceil((Math.max(...values.map(day => day.count)) / 5) * 4);\n\t\tthis.startDate = this.shiftDate(endDate, -Heatmap.DAYS_IN_ONE_YEAR);\n\t\tthis._values   = values;\n\t}\n\n\tset values(v: Value[]) {\n\t\tthis.max                    = Math.ceil((Math.max(...v.map(day => day.count)) / 5) * 4);\n\t\tthis._values                = v;\n\t\tthis._firstFullWeekOfMonths = undefined;\n\t\tthis._calendar              = undefined;\n\t\tthis._activities            = undefined;\n\t}\n\n\tget values(): Value[] {\n\t\treturn this._values;\n\t}\n\n\tget activities(): Activities {\n\t\tif (!this._activities) {\n\t\t\tthis._activities = new Map();\n\t\t\tfor (let i = 0, len = this.values.length; i < len; i++) {\n\t\t\t\tthis._activities.set(this.keyDayParser(this.values[ i ].date), {\n\t\t\t\t\tcount     : this.values[ i ].count,\n\t\t\t\t\tcolorIndex: this.getColorIndex(this.values[ i ].count)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn this._activities;\n\t}\n\n\tget weekCount() {\n\t\treturn this.getDaysCount() / Heatmap.DAYS_IN_WEEK;\n\t}\n\n\tget calendar() {\n\t\tif (!this._calendar) {\n\t\t\tlet date       = this.shiftDate(this.startDate, -this.getCountEmptyDaysAtStart());\n\t\t\tdate           = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\t\t\tthis._calendar = new Array(this.weekCount);\n\t\t\tfor (let i = 0, len = this._calendar.length; i < len; i++) {\n\t\t\t\tthis._calendar[ i ] = new Array(Heatmap.DAYS_IN_WEEK);\n\t\t\t\tfor (let j = 0; j < Heatmap.DAYS_IN_WEEK; j++) {\n\t\t\t\t\tconst dayValues          = this.activities.get(this.keyDayParser(date));\n\t\t\t\t\tthis._calendar![ i ][ j ] = {\n\t\t\t\t\t\tdate      : new Date(date.valueOf()),\n\t\t\t\t\t\tcount     : dayValues ? dayValues.count : undefined,\n\t\t\t\t\t\tcolorIndex: dayValues ? dayValues.colorIndex : 0\n\t\t\t\t\t};\n\t\t\t\t\tdate.setDate(date.getDate() + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._calendar;\n\t}\n\n\tget firstFullWeekOfMonths(): Month[] {\n\t\tif (!this._firstFullWeekOfMonths) {\n\t\t\tconst cal                   = this.calendar;\n\t\t\tthis._firstFullWeekOfMonths = [];\n\t\t\tfor (let index = 1, len = cal.length; index < len; index++) {\n\t\t\t\tconst lastWeek    = cal[ index - 1 ][ 0 ].date,\n\t\t\t\t\t  currentWeek = cal[ index ][ 0 ].date;\n\t\t\t\tif (lastWeek.getFullYear() < currentWeek.getFullYear() || lastWeek.getMonth() < currentWeek.getMonth()) {\n\t\t\t\t\tthis._firstFullWeekOfMonths.push({ value: currentWeek.getMonth(), index });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._firstFullWeekOfMonths;\n\t}\n\n\tgetColorIndex(count?: number) {\n\t\tif (count === null || count === undefined) {\n\t\t\treturn 0;\n\t\t} else if (count <= 0) {\n\t\t\treturn 1;\n\t\t} else if (count >= this.max) {\n\t\t\treturn 5;\n\t\t} else {\n\t\t\treturn (Math.ceil(((count * 100) / this.max) * (0.03))) + 1;\n\t\t}\n\t}\n\n\tgetCountEmptyDaysAtStart() {\n\t\treturn this.startDate.getDay();\n\t}\n\n\tgetCountEmptyDaysAtEnd() {\n\t\treturn (Heatmap.DAYS_IN_WEEK - 1) - this.endDate.getDay();\n\t}\n\n\tgetDaysCount() {\n\t\treturn Heatmap.DAYS_IN_ONE_YEAR + 1 + this.getCountEmptyDaysAtStart() + this.getCountEmptyDaysAtEnd();\n\t}\n\n\tprivate shiftDate(date: Date | string, numDays: number) {\n\t\tconst newDate = new Date(date);\n\t\tnewDate.setDate(newDate.getDate() + numDays);\n\t\treturn newDate;\n\t}\n\n\tprivate parseDate(entry: Date | string) {\n\t\treturn (entry instanceof Date) ? entry : (new Date(entry));\n\t}\n\n\tprivate keyDayParser(date: Date | string) {\n\t\tconst day = this.parseDate(date);\n\t\treturn String(day.getFullYear()) + String(day.getMonth()).padStart(2, '0') + String(day.getDate()).padStart(2, '0');\n\t}\n\n}\n","<template>\n\t<div :class=\"{'vch__container': true, 'dark-mode': darkMode}\">\n\t\t<svg class=\"vch__wrapper\" ref=\"svg\" :viewBox=\"viewbox\">\n\t\t\t<g class=\"vch__months__labels__wrapper\" :transform=\"monthsLabelWrapperTransform\">\n\t\t\t\t<text\n\t\t\t\t\tclass=\"vch__month__label\"\n\t\t\t\t\tv-for=\"(month, index) in heatmap.firstFullWeekOfMonths\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:x=\"getMonthLabelPosition(month).x\"\n\t\t\t\t\t:y=\"getMonthLabelPosition(month).y\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.months[ month.value ] }}\n\t\t\t\t</text>\n\t\t\t</g>\n\n\t\t\t<g class=\"vch__days__labels__wrapper\" :transform=\"daysLabelWrapperTransform\">\n\t\t\t\t<text class=\"vch__day__label\"\n\t\t\t\t\t  :x=\"vertical ? SQUARE_SIZE : 0\"\n\t\t\t\t\t  :y=\"vertical ? SQUARE_SIZE - SQUARE_BORDER_SIZE : 20\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.days[ 1 ] }}\n\t\t\t\t</text>\n\t\t\t\t<text class=\"vch__day__label\"\n\t\t\t\t\t  :x=\"vertical ? SQUARE_SIZE * 3 : 0\"\n\t\t\t\t\t  :y=\"vertical ? SQUARE_SIZE - SQUARE_BORDER_SIZE : 44\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.days[ 3 ] }}\n\t\t\t\t</text>\n\t\t\t\t<text class=\"vch__day__label\"\n\t\t\t\t\t  :x=\"vertical ? SQUARE_SIZE * 5 : 0\"\n\t\t\t\t\t  :y=\"vertical ? SQUARE_SIZE - SQUARE_BORDER_SIZE : 69\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.days[ 5 ] }}\n\t\t\t\t</text>\n\t\t\t</g>\n\n\t\t\t<g v-if=\"vertical\" class=\"vch__legend__wrapper\" :transform=\"legendWrapperTransform\">\n\t\t\t\t<text :x=\"SQUARE_SIZE * 1.25\" y=\"8\">{{ lo.less }}</text>\n\t\t\t\t<rect\n\t\t\t\t\tv-for=\"(color, index) in curRangeColor\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:rx=\"round\"\n\t\t\t\t\t:ry=\"round\"\n\t\t\t\t\t:style=\"{ fill: color }\"\n\t\t\t\t\t:width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t:height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t:x=\"SQUARE_SIZE * 1.75\"\n\t\t\t\t\t:y=\"SQUARE_SIZE * (index + 1)\"\n\t\t\t\t/>\n\t\t\t\t<text\n\t\t\t\t\t:x=\"SQUARE_SIZE * 1.25\"\n\t\t\t\t\t:y=\"SQUARE_SIZE * (curRangeColor.length + 2) - SQUARE_BORDER_SIZE\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.more }}\n\t\t\t\t</text>\n\t\t\t</g>\n\n\t\t\t<g class=\"vch__year__wrapper\" :transform=\"yearWrapperTransform\" @mouseover=\"initTippyLazy\">\n\t\t\t\t<g class=\"vch__month__wrapper\"\n\t\t\t\t   v-for=\"(week, weekIndex) in heatmap.calendar\"\n\t\t\t\t   :key=\"weekIndex\"\n\t\t\t\t   :transform=\"getWeekPosition(weekIndex)\"\n\t\t\t\t>\n\t\t\t\t\t<template v-for=\"(day, dayIndex) in week\" :key=\"dayIndex\">\n\t\t\t\t\t\t<rect class=\"vch__day__square\"\n\t\t\t\t\t\t\t  :rx=\"round\"\n\t\t\t\t\t\t\t  :ry=\"round\"\n\t\t\t\t\t\t\t  :transform=\"getDayPosition(dayIndex)\"\n\t\t\t\t\t\t\t  :width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t  :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t  :style=\"{ fill: curRangeColor[day.colorIndex] }\"\n\t\t\t\t\t\t\t  :data-week-index=\"weekIndex\"\n\t\t\t\t\t\t\t  :data-day-index=\"dayIndex\"\n\t\t\t\t\t\t\t  @click=\"$emit('dayClick', day)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t\t<div class=\"vch__legend\">\n\t\t\t<slot name=\"legend\">\n\t\t\t\t<div class=\"vch__legend-left\">\n\t\t\t\t\t<slot name=\"vch__legend-left\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"vch__legend-right\">\n\t\t\t\t\t<slot name=\"legend-right\">\n\t\t\t\t\t\t<div class=\"vch__legend\">\n\t\t\t\t\t\t\t<div>{{ lo.less }}</div>\n\t\t\t\t\t\t\t<svg v-if=\"!vertical\" class=\"vch__external-legend-wrapper\" :viewBox=\"legendViewbox\" :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\">\n\t\t\t\t\t\t\t\t<g class=\"vch__legend__wrapper\">\n\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\tv-for=\"(color, index) in curRangeColor\"\n\t\t\t\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t\t\t\t:rx=\"round\"\n\t\t\t\t\t\t\t\t\t\t:ry=\"round\"\n\t\t\t\t\t\t\t\t\t\t:style=\"{ fill: color }\"\n\t\t\t\t\t\t\t\t\t\t:width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t\t\t\t:height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t\t\t\t:x=\"SQUARE_SIZE * index\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<div>{{ lo.more }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\n\timport { defineComponent, nextTick, onBeforeUnmount, onMounted, PropType, ref, toRef, toRefs, watch } from 'vue';\n\timport { CalendarItem, Heatmap, Locale, Month, TooltipFormatter, Value } from '@/components/Heatmap';\n\timport tippy, { createSingleton, CreateSingletonInstance, Instance } from 'tippy.js';\n\timport 'tippy.js/dist/tippy.css';\n\timport 'tippy.js/dist/svg-arrow.css';\n\n\texport default /*#__PURE__*/defineComponent({\n\t\tname : 'CalendarHeatmap',\n\t\tprops: {\n\t\t\tendDate         : {\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tmax             : {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\trangeColor      : {\n\t\t\t\ttype: Array as PropType<string[]>\n\t\t\t},\n\t\t\tvalues          : {\n\t\t\t\ttype    : Array as PropType<Value[]>,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tlocale          : {\n\t\t\t\ttype: Object as PropType<Partial<Locale>>\n\t\t\t},\n\t\t\ttooltip         : {\n\t\t\t\ttype   : Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\ttooltipUnit     : {\n\t\t\t\ttype   : String,\n\t\t\t\tdefault: Heatmap.DEFAULT_TOOLTIP_UNIT\n\t\t\t},\n\t\t\ttooltipFormatter: {\n\t\t\t\ttype: Function as PropType<TooltipFormatter>\n\t\t\t},\n\t\t\tvertical        : {\n\t\t\t\ttype   : Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tnoDataText      : {\n\t\t\t\ttype   : [ Boolean, String ],\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tround           : {\n\t\t\t\ttype   : Number,\n\t\t\t\tdefault: 0\n\t\t\t},\n\t\t\tdarkMode        : Boolean\n\t\t},\n\t\temits: [ 'dayClick' ],\n\t\tsetup(props) {\n\n\t\t\tconst SQUARE_BORDER_SIZE          = Heatmap.SQUARE_SIZE / 5,\n\t\t\t\t  SQUARE_SIZE                 = Heatmap.SQUARE_SIZE + SQUARE_BORDER_SIZE,\n\t\t\t\t  LEFT_SECTION_WIDTH          = Math.ceil(Heatmap.SQUARE_SIZE * 2.5),\n\t\t\t\t  RIGHT_SECTION_WIDTH         = SQUARE_SIZE * 3,\n\t\t\t\t  TOP_SECTION_HEIGHT          = Heatmap.SQUARE_SIZE + (Heatmap.SQUARE_SIZE / 2),\n\t\t\t\t  BOTTOM_SECTION_HEIGHT       = Heatmap.SQUARE_SIZE + (Heatmap.SQUARE_SIZE / 2),\n\t\t\t\t  yearWrapperTransform        = `translate(${LEFT_SECTION_WIDTH}, ${TOP_SECTION_HEIGHT})`,\n\n\t\t\t\t  svg                         = ref<null | SVGElement>(null),\n\t\t\t\t  now                         = ref(new Date()),\n\t\t\t\t  heatmap                     = ref(new Heatmap(props.endDate as Date, props.values, props.max)),\n\n\t\t\t\t  width                       = ref(0),\n\t\t\t\t  height                      = ref(0),\n\t\t\t\t  viewbox                     = ref('0 0 0 0'),\n\t\t\t\t  legendViewbox               = ref('0 0 0 0'),\n\t\t\t\t  daysLabelWrapperTransform   = ref(''),\n\t\t\t\t  monthsLabelWrapperTransform = ref(''),\n\t\t\t\t  legendWrapperTransform      = ref(''),\n\t\t\t\t  lo                          = ref<Locale>({} as any),\n\t\t\t\t  rangeColor                  = ref<string[]>(props.rangeColor || (props.darkMode ? Heatmap.DEFAULT_RANGE_COLOR_DARK : Heatmap.DEFAULT_RANGE_COLOR_LIGHT));\n\n\t\t\tconst { values, tooltipUnit, tooltipFormatter, noDataText, max, vertical, locale } = toRefs(props),\n\t\t\t\t  tippyInstances                                                               = new Map<HTMLElement, Instance>();\n\n\t\t\tlet tippySingleton: CreateSingletonInstance;\n\n\n\t\t\tfunction initTippy() {\n\t\t\t\ttippyInstances.clear();\n\t\t\t\tif (tippySingleton) {\n\t\t\t\t\ttippySingleton.setInstances(Array.from(tippyInstances.values()));\n\t\t\t\t} else {\n\t\t\t\t\ttippySingleton = createSingleton(Array.from(tippyInstances.values()), {\n\t\t\t\t\t\toverrides     : [],\n\t\t\t\t\t\tmoveTransition: 'transform 0.1s ease-out',\n\t\t\t\t\t\tallowHTML     : true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction tooltipOptions(day: CalendarItem) {\n\t\t\t\tif (props.tooltip) {\n\t\t\t\t\tif (day.count !== undefined) {\n\t\t\t\t\t\tif (props.tooltipFormatter) {\n\t\t\t\t\t\t\treturn props.tooltipFormatter(day, props.tooltipUnit!);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn `<b>${day.count} ${props.tooltipUnit}</b> ${lo.value.on} ${lo.value.months[ day.date.getMonth() ]} ${day.date.getDate()}, ${day.date.getFullYear()}`;\n\t\t\t\t\t} else if (props.noDataText) {\n\t\t\t\t\t\treturn `${props.noDataText}`;\n\t\t\t\t\t} else if (props.noDataText !== false) {\n\t\t\t\t\t\treturn `<b>No ${props.tooltipUnit}</b> ${lo.value.on} ${lo.value.months[ day.date.getMonth() ]} ${day.date.getDate()}, ${day.date.getFullYear()}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tfunction getWeekPosition(index: number) {\n\t\t\t\tif (props.vertical) {\n\t\t\t\t\treturn `translate(0, ${(SQUARE_SIZE * heatmap.value.weekCount) - ((index + 1) * SQUARE_SIZE)})`;\n\t\t\t\t}\n\t\t\t\treturn `translate(${index * SQUARE_SIZE}, 0)`;\n\t\t\t}\n\n\t\t\tfunction getDayPosition(index: number) {\n\t\t\t\tif (props.vertical) {\n\t\t\t\t\treturn `translate(${index * SQUARE_SIZE}, 0)`;\n\t\t\t\t}\n\t\t\t\treturn `translate(0, ${index * SQUARE_SIZE})`;\n\t\t\t}\n\n\t\t\tfunction getMonthLabelPosition(month: Month) {\n\t\t\t\tif (props.vertical) {\n\t\t\t\t\treturn { x: 3, y: (SQUARE_SIZE * heatmap.value.weekCount) - (SQUARE_SIZE * (month.index)) - (SQUARE_SIZE / 4) };\n\t\t\t\t}\n\t\t\t\treturn { x: SQUARE_SIZE * month.index, y: SQUARE_SIZE - SQUARE_BORDER_SIZE };\n\t\t\t}\n\n\t\t\twatch([ toRef(props, 'rangeColor'), toRef(props, 'darkMode') ], ([ rc, dm ]) => {\n\t\t\t\trangeColor.value = rc || (dm ? Heatmap.DEFAULT_RANGE_COLOR_DARK : Heatmap.DEFAULT_RANGE_COLOR_LIGHT);\n\t\t\t});\n\n\t\t\twatch(vertical, v => {\n\t\t\t\tif (v) {\n\t\t\t\t\twidth.value                       = LEFT_SECTION_WIDTH + (SQUARE_SIZE * Heatmap.DAYS_IN_WEEK) + RIGHT_SECTION_WIDTH;\n\t\t\t\t\theight.value                      = TOP_SECTION_HEIGHT + (SQUARE_SIZE * heatmap.value.weekCount) + SQUARE_BORDER_SIZE;\n\t\t\t\t\tdaysLabelWrapperTransform.value   = `translate(${LEFT_SECTION_WIDTH}, 0)`;\n\t\t\t\t\tmonthsLabelWrapperTransform.value = `translate(0, ${TOP_SECTION_HEIGHT})`;\n\t\t\t\t} else {\n\t\t\t\t\twidth.value                       = LEFT_SECTION_WIDTH + (SQUARE_SIZE * heatmap.value.weekCount) + SQUARE_BORDER_SIZE;\n\t\t\t\t\theight.value                      = TOP_SECTION_HEIGHT + (SQUARE_SIZE * Heatmap.DAYS_IN_WEEK);\n\t\t\t\t\tdaysLabelWrapperTransform.value   = `translate(0, ${TOP_SECTION_HEIGHT})`;\n\t\t\t\t\tmonthsLabelWrapperTransform.value = `translate(${LEFT_SECTION_WIDTH}, 0)`;\n\t\t\t\t}\n\t\t\t}, { immediate: true });\n\n\t\t\twatch([ width, height ], ([ w, h ]) => (viewbox.value = ` 0 0 ${w} ${h}`), { immediate: true });\n\t\t\twatch([ width, height, rangeColor ], ([ w, h, rc ]) => {\n\t\t\t\tlegendWrapperTransform.value = vertical.value\n\t\t\t\t\t? `translate(${LEFT_SECTION_WIDTH + (SQUARE_SIZE * Heatmap.DAYS_IN_WEEK)}, ${TOP_SECTION_HEIGHT})`\n\t\t\t\t\t: `translate(${w - (SQUARE_SIZE * rc.length) - 30}, ${h - BOTTOM_SECTION_HEIGHT})`;\n\t\t\t}, { immediate: true });\n\n\t\t\twatch(locale, l => (lo.value = l ? { ...Heatmap.DEFAULT_LOCALE, ...l } : Heatmap.DEFAULT_LOCALE), { immediate: true });\n\t\t\twatch(rangeColor, rc => (legendViewbox.value = `0 0 ${Heatmap.SQUARE_SIZE * (rc.length + 1)} ${Heatmap.SQUARE_SIZE}`), { immediate: true });\n\n\t\t\twatch(\n\t\t\t\t[ values, tooltipUnit, tooltipFormatter, noDataText, max, rangeColor ],\n\t\t\t\t() => {\n\t\t\t\t\theatmap.value = new Heatmap(props.endDate as Date, props.values, props.max);\n\t\t\t\t\ttippyInstances.forEach((item) => item.destroy());\n\t\t\t\t\tnextTick(initTippy);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tonMounted(initTippy);\n\t\t\tonBeforeUnmount(() => {\n\t\t\t\ttippySingleton?.destroy();\n\t\t\t\ttippyInstances.forEach((item) => item.destroy());\n\t\t\t});\n\n\t\t\tfunction initTippyLazy(e: MouseEvent) {\n\n\t\t\t\tif (tippySingleton\n\t\t\t\t\t&& e.target\n\t\t\t\t\t&& (e.target as HTMLElement).classList.contains('vch__day__square')\n\t\t\t\t\t&& (e.target as HTMLElement).dataset.weekIndex !== undefined\n\t\t\t\t\t&& (e.target as HTMLElement).dataset.dayIndex !== undefined\n\t\t\t\t) {\n\n\t\t\t\t\tconst weekIndex = Number((e.target as HTMLElement).dataset.weekIndex),\n\t\t\t\t\t\t  dayIndex  = Number((e.target as HTMLElement).dataset.dayIndex);\n\n\t\t\t\t\tif (!isNaN(weekIndex) && !isNaN(dayIndex)) {\n\n\t\t\t\t\t\tconst tooltip = tooltipOptions(heatmap.value.calendar[ weekIndex ][ dayIndex ]);\n\t\t\t\t\t\tif (tooltip) {\n\n\t\t\t\t\t\t\tconst instance = tippyInstances.get(e.target as HTMLElement);\n\n\t\t\t\t\t\t\tif (instance) {\n\t\t\t\t\t\t\t\tinstance.setContent(tooltip);\n\t\t\t\t\t\t\t} else if (!instance) {\n\t\t\t\t\t\t\t\ttippyInstances.set(e.target as HTMLElement, tippy(e.target as HTMLElement, { content: tooltip } as any));\n\t\t\t\t\t\t\t\ttippySingleton.setInstances(Array.from(tippyInstances.values()));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tSQUARE_BORDER_SIZE, SQUARE_SIZE, LEFT_SECTION_WIDTH, RIGHT_SECTION_WIDTH, TOP_SECTION_HEIGHT, BOTTOM_SECTION_HEIGHT,\n\t\t\t\tsvg, heatmap, now, width, height, viewbox, daysLabelWrapperTransform, monthsLabelWrapperTransform, yearWrapperTransform, legendWrapperTransform,\n\t\t\t\tlo, legendViewbox, curRangeColor: rangeColor,\n\t\t\t\tgetWeekPosition, getDayPosition, getMonthLabelPosition, initTippyLazy\n\t\t\t};\n\t\t}\n\t});\n</script>\n\n<style lang=\"scss\">\n\n\t.vch__container {\n\t\t.vch__legend {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t.vch__external-legend-wrapper {\n\t\t\tmargin: 0 8px;\n\t\t}\n\t}\n\n\tsvg.vch__wrapper {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\t\tline-height: 10px;\n\t\twidth: 100%;\n\n\t\t.vch__months__labels__wrapper text.vch__month__label {\n\t\t\tfont-size: 10px;\n\t\t}\n\n\t\t.vch__days__labels__wrapper text.vch__day__label,\n\t\t.vch__legend__wrapper text {\n\t\t\tfont-size: 9px;\n\t\t}\n\n\t\ttext.vch__month__label,\n\t\ttext.vch__day__label,\n\t\t.vch__legend__wrapper text {\n\t\t\tfill: #767676;\n\t\t}\n\n\t\trect.vch__day__square:hover {\n\t\t\tstroke: #555;\n\t\t\tstroke-width: 2px;\n\t\t\tpaint-order: stroke;\n\t\t}\n\n\t\trect.vch__day__square:focus {\n\t\t\toutline: none;\n\t\t}\n\n\t\t&.dark-mode {\n\t\t\ttext.vch__month__label,\n\t\t\ttext.vch__day__label,\n\t\t\t.vch__legend__wrapper text {\n\t\t\t\tfill: #fff;\n\t\t\t}\n\t\t}\n\t}\n\n</style>\n","import { App } from 'vue';\nimport CalendarHeatmap from '@/components/CalendarHeatmap.vue';\n\nfunction install(Vue: App) {\n\tVue.component(CalendarHeatmap.name!, CalendarHeatmap);\n}\n\nexport default { install };\nexport * from '@/components/Heatmap';\nexport { default as CalendarHeatmap } from '@/components/CalendarHeatmap.vue';\n"],"names":["_Heatmap","endDate","values","max","__publicField","day","v","i","len","date","j","dayValues","cal","index","lastWeek","currentWeek","count","numDays","newDate","entry","Heatmap","_sfc_main","defineComponent","props","SQUARE_BORDER_SIZE","SQUARE_SIZE","LEFT_SECTION_WIDTH","RIGHT_SECTION_WIDTH","TOP_SECTION_HEIGHT","BOTTOM_SECTION_HEIGHT","yearWrapperTransform","svg","ref","now","heatmap","width","height","viewbox","legendViewbox","daysLabelWrapperTransform","monthsLabelWrapperTransform","legendWrapperTransform","lo","rangeColor","tooltipUnit","tooltipFormatter","noDataText","vertical","locale","toRefs","tippyInstances","tippySingleton","initTippy","createSingleton","tooltipOptions","getWeekPosition","getDayPosition","getMonthLabelPosition","month","watch","toRef","rc","dm","w","h","l","item","nextTick","onMounted","onBeforeUnmount","initTippyLazy","e","weekIndex","dayIndex","tooltip","instance","tippy","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_19","_sfc_render","_ctx","darkMode","_openBlock","_createElementBlock","_Fragment","_renderList","_toDisplayString","_createElementVNode","color","round","_normalizeStyle","curRangeColor","_createCommentVNode","_cache","args","week","$event","_hoisted_15","_renderSlot","_hoisted_18","_hoisted_20","install","Vue","CalendarHeatmap"],"mappings":"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"}