{"version":3,"file":"vue3-calendar-heatmap.es.js","sources":["../src/components/Heatmap.ts","../src/components/CalendarHeatmap.vue","../src/index.ts"],"sourcesContent":["export interface Value {\n\tdate: Date | string;\n\tcount: number;\n}\n\nexport interface Activity {\n\tcount: number;\n\tcolorIndex: number;\n}\n\nexport type Activities = Map<string, Activity>;\n\nexport interface CalendarItem {\n\tdate: Date;\n\tcount?: number;\n\tcolorIndex: number;\n}\n\nexport type Calendar = CalendarItem[][];\n\nexport interface Month {\n\tvalue: number;\n\tindex: number;\n}\n\nexport interface Locale {\n\tmonths: string[];\n\tdays: string[];\n\ton: string;\n\tless: string;\n\tmore: string;\n}\n\nexport type TooltipFormatter = (item: CalendarItem, unit: string) => string;\n\nexport class Heatmap {\n\n\tstatic readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#dae2ef', '#c0ddf9', '#73b3f3', '#3886e1', '#17459e' ];\n\tstatic readonly DEFAULT_RANGE_COLOR_DARK  = [ '#1f1f22', '#1e334a', '#1d466c', '#1d5689', '#1d69ac', '#1B95D1' ];\n\t// other color candidates\n\t// static readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#9be9a8', '#40c463', '#30a14e', '#216e39' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK  = [ '#161b22', '#0e4429', '#006d32', '#26a641', '#39d353' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#011526', '#012E40', '#025959', '#02735E', '#038C65' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#161b22', '#015958', '#008F8C', '#0CABA8', '#0FC2C0' ];\n\t// static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#012030', '#13678A', '#45C4B0', '#9AEBA3', '#DAFDBA' ];\n\tstatic readonly DEFAULT_LOCALE: Locale = {\n\t\tmonths: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],\n\t\tdays  : [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],\n\t\ton    : 'on',\n\t\tless  : 'Less',\n\t\tmore  : 'More'\n\t};\n\tstatic readonly DEFAULT_TOOLTIP_UNIT   = 'contributions';\n\tstatic readonly DAYS_IN_ONE_YEAR       = 365;\n\tstatic readonly DAYS_IN_WEEK           = 7;\n\tstatic readonly SQUARE_SIZE            = 10;\n\n\tstartDate: Date;\n\tendDate: Date;\n\tmax: number;\n\n\tprivate _values: Value[];\n\tprivate _firstFullWeekOfMonths?: Month[];\n\tprivate _activities?: Activities;\n\tprivate _calendar?: Calendar;\n\n\tconstructor(endDate: Date | string, values: Value[], max?: number) {\n\t\tthis.endDate   = this.parseDate(endDate);\n\t\tthis.max       = max || Math.ceil((Math.max(...values.map(day => day.count)) / 5) * 4);\n\t\tthis.startDate = this.shiftDate(endDate, -Heatmap.DAYS_IN_ONE_YEAR);\n\t\tthis._values   = values;\n\t}\n\n\tset values(v: Value[]) {\n\t\tthis.max                    = Math.ceil((Math.max(...v.map(day => day.count)) / 5) * 4);\n\t\tthis._values                = v;\n\t\tthis._firstFullWeekOfMonths = undefined;\n\t\tthis._calendar              = undefined;\n\t\tthis._activities            = undefined;\n\t}\n\n\tget values(): Value[] {\n\t\treturn this._values;\n\t}\n\n\tget activities(): Activities {\n\t\tif (!this._activities) {\n\t\t\tthis._activities = new Map();\n\t\t\tfor (let i = 0, len = this.values.length; i < len; i++) {\n\t\t\t\tthis._activities.set(this.keyDayParser(this.values[ i ].date), {\n\t\t\t\t\tcount     : this.values[ i ].count,\n\t\t\t\t\tcolorIndex: this.getColorIndex(this.values[ i ].count)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn this._activities;\n\t}\n\n\tget weekCount() {\n\t\treturn this.getDaysCount() / Heatmap.DAYS_IN_WEEK;\n\t}\n\n\tget calendar() {\n\t\tif (!this._calendar) {\n\t\t\tlet date       = this.shiftDate(this.startDate, -this.getCountEmptyDaysAtStart());\n\t\t\tdate           = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\t\t\tthis._calendar = new Array(this.weekCount);\n\t\t\tfor (let i = 0, len = this._calendar.length; i < len; i++) {\n\t\t\t\tthis._calendar[ i ] = new Array(Heatmap.DAYS_IN_WEEK);\n\t\t\t\tfor (let j = 0; j < Heatmap.DAYS_IN_WEEK; j++) {\n\t\t\t\t\tconst dayValues          = this.activities.get(this.keyDayParser(date));\n\t\t\t\t\tthis._calendar![ i ][ j ] = {\n\t\t\t\t\t\tdate      : new Date(date.valueOf()),\n\t\t\t\t\t\tcount     : dayValues ? dayValues.count : undefined,\n\t\t\t\t\t\tcolorIndex: dayValues ? dayValues.colorIndex : 0\n\t\t\t\t\t};\n\t\t\t\t\tdate.setDate(date.getDate() + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._calendar;\n\t}\n\n\tget firstFullWeekOfMonths(): Month[] {\n\t\tif (!this._firstFullWeekOfMonths) {\n\t\t\tconst cal                   = this.calendar;\n\t\t\tthis._firstFullWeekOfMonths = [];\n\t\t\tfor (let index = 1, len = cal.length; index < len; index++) {\n\t\t\t\tconst lastWeek    = cal[ index - 1 ][ 0 ].date,\n\t\t\t\t\t  currentWeek = cal[ index ][ 0 ].date;\n\t\t\t\tif (lastWeek.getFullYear() < currentWeek.getFullYear() || lastWeek.getMonth() < currentWeek.getMonth()) {\n\t\t\t\t\tthis._firstFullWeekOfMonths.push({ value: currentWeek.getMonth(), index });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this._firstFullWeekOfMonths;\n\t}\n\n\tgetColorIndex(count?: number) {\n\t\tif (count === null || count === undefined) {\n\t\t\treturn 0;\n\t\t} else if (count <= 0) {\n\t\t\treturn 1;\n\t\t} else if (count >= this.max) {\n\t\t\treturn 5;\n\t\t} else {\n\t\t\treturn (Math.ceil(((count * 100) / this.max) * (0.03))) + 1;\n\t\t}\n\t}\n\n\tgetCountEmptyDaysAtStart() {\n\t\treturn this.startDate.getDay();\n\t}\n\n\tgetCountEmptyDaysAtEnd() {\n\t\treturn (Heatmap.DAYS_IN_WEEK - 1) - this.endDate.getDay();\n\t}\n\n\tgetDaysCount() {\n\t\treturn Heatmap.DAYS_IN_ONE_YEAR + 1 + this.getCountEmptyDaysAtStart() + this.getCountEmptyDaysAtEnd();\n\t}\n\n\tprivate shiftDate(date: Date | string, numDays: number) {\n\t\tconst newDate = new Date(date);\n\t\tnewDate.setDate(newDate.getDate() + numDays);\n\t\treturn newDate;\n\t}\n\n\tprivate parseDate(entry: Date | string) {\n\t\treturn (entry instanceof Date) ? entry : (new Date(entry));\n\t}\n\n\tprivate keyDayParser(date: Date | string) {\n\t\tconst day = this.parseDate(date);\n\t\treturn String(day.getFullYear()) + String(day.getMonth()).padStart(2, '0') + String(day.getDate()).padStart(2, '0');\n\t}\n\n}\n","<template>\n\t<div :class=\"{'vch__container': true, 'dark-mode': darkMode}\">\n\t\t<svg class=\"vch__wrapper\" ref=\"svg\" :viewBox=\"viewbox\">\n\t\t\t<g class=\"vch__months__labels__wrapper\" :transform=\"monthsLabelWrapperTransform\">\n\t\t\t\t<text\n\t\t\t\t\tclass=\"vch__month__label\"\n\t\t\t\t\tv-for=\"(month, index) in heatmap.firstFullWeekOfMonths\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:x=\"getMonthLabelPosition(month).x\"\n\t\t\t\t\t:y=\"getMonthLabelPosition(month).y\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.months[ month.value ] }}\n\t\t\t\t</text>\n\t\t\t</g>\n\n\t\t\t<g class=\"vch__days__labels__wrapper\" :transform=\"daysLabelWrapperTransform\">\n\t\t\t\t<text class=\"vch__day__label\"\n\t\t\t\t\t  :x=\"vertical ? SQUARE_SIZE : 0\"\n\t\t\t\t\t  :y=\"vertical ? SQUARE_SIZE - SQUARE_BORDER_SIZE : 20\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.days[ 1 ] }}\n\t\t\t\t</text>\n\t\t\t\t<text class=\"vch__day__label\"\n\t\t\t\t\t  :x=\"vertical ? SQUARE_SIZE * 3 : 0\"\n\t\t\t\t\t  :y=\"vertical ? SQUARE_SIZE - SQUARE_BORDER_SIZE : 44\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.days[ 3 ] }}\n\t\t\t\t</text>\n\t\t\t\t<text class=\"vch__day__label\"\n\t\t\t\t\t  :x=\"vertical ? SQUARE_SIZE * 5 : 0\"\n\t\t\t\t\t  :y=\"vertical ? SQUARE_SIZE - SQUARE_BORDER_SIZE : 69\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.days[ 5 ] }}\n\t\t\t\t</text>\n\t\t\t</g>\n\n\t\t\t<g v-if=\"vertical\" class=\"vch__legend__wrapper\" :transform=\"legendWrapperTransform\">\n\t\t\t\t<text :x=\"SQUARE_SIZE * 1.25\" y=\"8\">{{ lo.less }}</text>\n\t\t\t\t<rect\n\t\t\t\t\tv-for=\"(color, index) in curRangeColor\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:rx=\"round\"\n\t\t\t\t\t:ry=\"round\"\n\t\t\t\t\t:style=\"{ fill: color }\"\n\t\t\t\t\t:width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t:height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t:x=\"SQUARE_SIZE * 1.75\"\n\t\t\t\t\t:y=\"SQUARE_SIZE * (index + 1)\"\n\t\t\t\t/>\n\t\t\t\t<text\n\t\t\t\t\t:x=\"SQUARE_SIZE * 1.25\"\n\t\t\t\t\t:y=\"SQUARE_SIZE * (curRangeColor.length + 2) - SQUARE_BORDER_SIZE\"\n\t\t\t\t>\n\t\t\t\t\t{{ lo.more }}\n\t\t\t\t</text>\n\t\t\t</g>\n\n\t\t\t<g class=\"vch__year__wrapper\" :transform=\"yearWrapperTransform\" @mouseover=\"initTippyLazy\">\n\t\t\t\t<g class=\"vch__month__wrapper\"\n\t\t\t\t   v-for=\"(week, weekIndex) in heatmap.calendar\"\n\t\t\t\t   :key=\"weekIndex\"\n\t\t\t\t   :transform=\"getWeekPosition(weekIndex)\"\n\t\t\t\t>\n\t\t\t\t\t<template v-for=\"(day, dayIndex) in week\" :key=\"dayIndex\">\n\t\t\t\t\t\t<rect class=\"vch__day__square\"\n\t\t\t\t\t\t\t  :rx=\"round\"\n\t\t\t\t\t\t\t  :ry=\"round\"\n\t\t\t\t\t\t\t  :transform=\"getDayPosition(dayIndex)\"\n\t\t\t\t\t\t\t  :width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t  :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t  :style=\"{ fill: curRangeColor[day.colorIndex] }\"\n\t\t\t\t\t\t\t  :data-week-index=\"weekIndex\"\n\t\t\t\t\t\t\t  :data-day-index=\"dayIndex\"\n\t\t\t\t\t\t\t  @click=\"$emit('dayClick', day)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t\t<div class=\"vch__legend\">\n\t\t\t<slot name=\"legend\">\n\t\t\t\t<div class=\"vch__legend-left\">\n\t\t\t\t\t<slot name=\"vch__legend-left\"></slot>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"vch__legend-right\">\n\t\t\t\t\t<slot name=\"legend-right\">\n\t\t\t\t\t\t<div class=\"vch__legend\">\n\t\t\t\t\t\t\t<div>{{ lo.less }}</div>\n\t\t\t\t\t\t\t<svg v-if=\"!vertical\" class=\"vch__external-legend-wrapper\" :viewBox=\"legendViewbox\" :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\">\n\t\t\t\t\t\t\t\t<g class=\"vch__legend__wrapper\">\n\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\tv-for=\"(color, index) in curRangeColor\"\n\t\t\t\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t\t\t\t:rx=\"round\"\n\t\t\t\t\t\t\t\t\t\t:ry=\"round\"\n\t\t\t\t\t\t\t\t\t\t:style=\"{ fill: color }\"\n\t\t\t\t\t\t\t\t\t\t:width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t\t\t\t:height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n\t\t\t\t\t\t\t\t\t\t:x=\"SQUARE_SIZE * index\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</g>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t<div>{{ lo.more }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t</slot>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\n\timport { defineComponent, nextTick, onBeforeUnmount, onMounted, PropType, ref, toRef, toRefs, watch } from 'vue';\n\timport { CalendarItem, Heatmap, Locale, Month, TooltipFormatter, Value } from '@/components/Heatmap';\n\timport tippy, { createSingleton, CreateSingletonInstance, Instance } from 'tippy.js';\n\timport 'tippy.js/dist/tippy.css';\n\timport 'tippy.js/dist/svg-arrow.css';\n\n\texport default /*#__PURE__*/defineComponent({\n\t\tname : 'CalendarHeatmap',\n\t\tprops: {\n\t\t\tendDate         : {\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tmax             : {\n\t\t\t\ttype: Number\n\t\t\t},\n\t\t\trangeColor      : {\n\t\t\t\ttype: Array as PropType<string[]>\n\t\t\t},\n\t\t\tvalues          : {\n\t\t\t\ttype    : Array as PropType<Value[]>,\n\t\t\t\trequired: true\n\t\t\t},\n\t\t\tlocale          : {\n\t\t\t\ttype: Object as PropType<Partial<Locale>>\n\t\t\t},\n\t\t\ttooltip         : {\n\t\t\t\ttype   : Boolean,\n\t\t\t\tdefault: true\n\t\t\t},\n\t\t\ttooltipUnit     : {\n\t\t\t\ttype   : String,\n\t\t\t\tdefault: Heatmap.DEFAULT_TOOLTIP_UNIT\n\t\t\t},\n\t\t\ttooltipFormatter: {\n\t\t\t\ttype: Function as PropType<TooltipFormatter>\n\t\t\t},\n\t\t\tvertical        : {\n\t\t\t\ttype   : Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tnoDataText      : {\n\t\t\t\ttype   : [ Boolean, String ],\n\t\t\t\tdefault: null\n\t\t\t},\n\t\t\tround           : {\n\t\t\t\ttype   : Number,\n\t\t\t\tdefault: 0\n\t\t\t},\n\t\t\tdarkMode        : Boolean\n\t\t},\n\t\temits: [ 'dayClick' ],\n\t\tsetup(props) {\n\n\t\t\tconst SQUARE_BORDER_SIZE          = Heatmap.SQUARE_SIZE / 5,\n\t\t\t\t  SQUARE_SIZE                 = Heatmap.SQUARE_SIZE + SQUARE_BORDER_SIZE,\n\t\t\t\t  LEFT_SECTION_WIDTH          = Math.ceil(Heatmap.SQUARE_SIZE * 2.5),\n\t\t\t\t  RIGHT_SECTION_WIDTH         = SQUARE_SIZE * 3,\n\t\t\t\t  TOP_SECTION_HEIGHT          = Heatmap.SQUARE_SIZE + (Heatmap.SQUARE_SIZE / 2),\n\t\t\t\t  BOTTOM_SECTION_HEIGHT       = Heatmap.SQUARE_SIZE + (Heatmap.SQUARE_SIZE / 2),\n\t\t\t\t  yearWrapperTransform        = `translate(${LEFT_SECTION_WIDTH}, ${TOP_SECTION_HEIGHT})`,\n\n\t\t\t\t  svg                         = ref<null | SVGElement>(null),\n\t\t\t\t  now                         = ref(new Date()),\n\t\t\t\t  heatmap                     = ref(new Heatmap(props.endDate as Date, props.values, props.max)),\n\n\t\t\t\t  width                       = ref(0),\n\t\t\t\t  height                      = ref(0),\n\t\t\t\t  viewbox                     = ref('0 0 0 0'),\n\t\t\t\t  legendViewbox               = ref('0 0 0 0'),\n\t\t\t\t  daysLabelWrapperTransform   = ref(''),\n\t\t\t\t  monthsLabelWrapperTransform = ref(''),\n\t\t\t\t  legendWrapperTransform      = ref(''),\n\t\t\t\t  lo                          = ref<Locale>({} as any),\n\t\t\t\t  rangeColor                  = ref<string[]>(props.rangeColor || (props.darkMode ? Heatmap.DEFAULT_RANGE_COLOR_DARK : Heatmap.DEFAULT_RANGE_COLOR_LIGHT));\n\n\t\t\tconst { values, tooltipUnit, tooltipFormatter, noDataText, max, vertical, locale } = toRefs(props),\n\t\t\t\t  tippyInstances                                                               = new Map<HTMLElement, Instance>();\n\n\t\t\tlet tippySingleton: CreateSingletonInstance;\n\n\n\t\t\tfunction initTippy() {\n\t\t\t\ttippyInstances.clear();\n\t\t\t\tif (tippySingleton) {\n\t\t\t\t\ttippySingleton.setInstances(Array.from(tippyInstances.values()));\n\t\t\t\t} else {\n\t\t\t\t\ttippySingleton = createSingleton(Array.from(tippyInstances.values()), {\n\t\t\t\t\t\toverrides     : [],\n\t\t\t\t\t\tmoveTransition: 'transform 0.1s ease-out',\n\t\t\t\t\t\tallowHTML     : true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction tooltipOptions(day: CalendarItem) {\n\t\t\t\tif (props.tooltip) {\n\t\t\t\t\tif (day.count !== undefined) {\n\t\t\t\t\t\tif (props.tooltipFormatter) {\n\t\t\t\t\t\t\treturn props.tooltipFormatter(day, props.tooltipUnit!);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn `<b>${day.count} ${props.tooltipUnit}</b> ${lo.value.on} ${lo.value.months[ day.date.getMonth() ]} ${day.date.getDate()}, ${day.date.getFullYear()}`;\n\t\t\t\t\t} else if (props.noDataText) {\n\t\t\t\t\t\treturn `${props.noDataText}`;\n\t\t\t\t\t} else if (props.noDataText !== false) {\n\t\t\t\t\t\treturn `<b>No ${props.tooltipUnit}</b> ${lo.value.on} ${lo.value.months[ day.date.getMonth() ]} ${day.date.getDate()}, ${day.date.getFullYear()}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tfunction getWeekPosition(index: number) {\n\t\t\t\tif (props.vertical) {\n\t\t\t\t\treturn `translate(0, ${(SQUARE_SIZE * heatmap.value.weekCount) - ((index + 1) * SQUARE_SIZE)})`;\n\t\t\t\t}\n\t\t\t\treturn `translate(${index * SQUARE_SIZE}, 0)`;\n\t\t\t}\n\n\t\t\tfunction getDayPosition(index: number) {\n\t\t\t\tif (props.vertical) {\n\t\t\t\t\treturn `translate(${index * SQUARE_SIZE}, 0)`;\n\t\t\t\t}\n\t\t\t\treturn `translate(0, ${index * SQUARE_SIZE})`;\n\t\t\t}\n\n\t\t\tfunction getMonthLabelPosition(month: Month) {\n\t\t\t\tif (props.vertical) {\n\t\t\t\t\treturn { x: 3, y: (SQUARE_SIZE * heatmap.value.weekCount) - (SQUARE_SIZE * (month.index)) - (SQUARE_SIZE / 4) };\n\t\t\t\t}\n\t\t\t\treturn { x: SQUARE_SIZE * month.index, y: SQUARE_SIZE - SQUARE_BORDER_SIZE };\n\t\t\t}\n\n\t\t\twatch([ toRef(props, 'rangeColor'), toRef(props, 'darkMode') ], ([ rc, dm ]) => {\n\t\t\t\trangeColor.value = rc || (dm ? Heatmap.DEFAULT_RANGE_COLOR_DARK : Heatmap.DEFAULT_RANGE_COLOR_LIGHT);\n\t\t\t});\n\n\t\t\twatch(vertical, v => {\n\t\t\t\tif (v) {\n\t\t\t\t\twidth.value                       = LEFT_SECTION_WIDTH + (SQUARE_SIZE * Heatmap.DAYS_IN_WEEK) + RIGHT_SECTION_WIDTH;\n\t\t\t\t\theight.value                      = TOP_SECTION_HEIGHT + (SQUARE_SIZE * heatmap.value.weekCount) + SQUARE_BORDER_SIZE;\n\t\t\t\t\tdaysLabelWrapperTransform.value   = `translate(${LEFT_SECTION_WIDTH}, 0)`;\n\t\t\t\t\tmonthsLabelWrapperTransform.value = `translate(0, ${TOP_SECTION_HEIGHT})`;\n\t\t\t\t} else {\n\t\t\t\t\twidth.value                       = LEFT_SECTION_WIDTH + (SQUARE_SIZE * heatmap.value.weekCount) + SQUARE_BORDER_SIZE;\n\t\t\t\t\theight.value                      = TOP_SECTION_HEIGHT + (SQUARE_SIZE * Heatmap.DAYS_IN_WEEK);\n\t\t\t\t\tdaysLabelWrapperTransform.value   = `translate(0, ${TOP_SECTION_HEIGHT})`;\n\t\t\t\t\tmonthsLabelWrapperTransform.value = `translate(${LEFT_SECTION_WIDTH}, 0)`;\n\t\t\t\t}\n\t\t\t}, { immediate: true });\n\n\t\t\twatch([ width, height ], ([ w, h ]) => (viewbox.value = ` 0 0 ${w} ${h}`), { immediate: true });\n\t\t\twatch([ width, height, rangeColor ], ([ w, h, rc ]) => {\n\t\t\t\tlegendWrapperTransform.value = vertical.value\n\t\t\t\t\t? `translate(${LEFT_SECTION_WIDTH + (SQUARE_SIZE * Heatmap.DAYS_IN_WEEK)}, ${TOP_SECTION_HEIGHT})`\n\t\t\t\t\t: `translate(${w - (SQUARE_SIZE * rc.length) - 30}, ${h - BOTTOM_SECTION_HEIGHT})`;\n\t\t\t}, { immediate: true });\n\n\t\t\twatch(locale, l => (lo.value = l ? { ...Heatmap.DEFAULT_LOCALE, ...l } : Heatmap.DEFAULT_LOCALE), { immediate: true });\n\t\t\twatch(rangeColor, rc => (legendViewbox.value = `0 0 ${Heatmap.SQUARE_SIZE * (rc.length + 1)} ${Heatmap.SQUARE_SIZE}`), { immediate: true });\n\n\t\t\twatch(\n\t\t\t\t[ values, tooltipUnit, tooltipFormatter, noDataText, max, rangeColor ],\n\t\t\t\t() => {\n\t\t\t\t\theatmap.value = new Heatmap(props.endDate as Date, props.values, props.max);\n\t\t\t\t\ttippyInstances.forEach((item) => item.destroy());\n\t\t\t\t\tnextTick(initTippy);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tonMounted(initTippy);\n\t\t\tonBeforeUnmount(() => {\n\t\t\t\ttippySingleton?.destroy();\n\t\t\t\ttippyInstances.forEach((item) => item.destroy());\n\t\t\t});\n\n\t\t\tfunction initTippyLazy(e: MouseEvent) {\n\n\t\t\t\tif (tippySingleton\n\t\t\t\t\t&& e.target\n\t\t\t\t\t&& (e.target as HTMLElement).classList.contains('vch__day__square')\n\t\t\t\t\t&& (e.target as HTMLElement).dataset.weekIndex !== undefined\n\t\t\t\t\t&& (e.target as HTMLElement).dataset.dayIndex !== undefined\n\t\t\t\t) {\n\n\t\t\t\t\tconst weekIndex = Number((e.target as HTMLElement).dataset.weekIndex),\n\t\t\t\t\t\t  dayIndex  = Number((e.target as HTMLElement).dataset.dayIndex);\n\n\t\t\t\t\tif (!isNaN(weekIndex) && !isNaN(dayIndex)) {\n\n\t\t\t\t\t\tconst tooltip = tooltipOptions(heatmap.value.calendar[ weekIndex ][ dayIndex ]);\n\t\t\t\t\t\tif (tooltip) {\n\n\t\t\t\t\t\t\tconst instance = tippyInstances.get(e.target as HTMLElement);\n\n\t\t\t\t\t\t\tif (instance) {\n\t\t\t\t\t\t\t\tinstance.setContent(tooltip);\n\t\t\t\t\t\t\t} else if (!instance) {\n\t\t\t\t\t\t\t\ttippyInstances.set(e.target as HTMLElement, tippy(e.target as HTMLElement, { content: tooltip } as any));\n\t\t\t\t\t\t\t\ttippySingleton.setInstances(Array.from(tippyInstances.values()));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tSQUARE_BORDER_SIZE, SQUARE_SIZE, LEFT_SECTION_WIDTH, RIGHT_SECTION_WIDTH, TOP_SECTION_HEIGHT, BOTTOM_SECTION_HEIGHT,\n\t\t\t\tsvg, heatmap, now, width, height, viewbox, daysLabelWrapperTransform, monthsLabelWrapperTransform, yearWrapperTransform, legendWrapperTransform,\n\t\t\t\tlo, legendViewbox, curRangeColor: rangeColor,\n\t\t\t\tgetWeekPosition, getDayPosition, getMonthLabelPosition, initTippyLazy\n\t\t\t};\n\t\t}\n\t});\n</script>\n\n<style lang=\"scss\">\n\n\t.vch__container {\n\t\t.vch__legend {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t.vch__external-legend-wrapper {\n\t\t\tmargin: 0 8px;\n\t\t}\n\t}\n\n\tsvg.vch__wrapper {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n\t\tline-height: 10px;\n\t\twidth: 100%;\n\n\t\t.vch__months__labels__wrapper text.vch__month__label {\n\t\t\tfont-size: 10px;\n\t\t}\n\n\t\t.vch__days__labels__wrapper text.vch__day__label,\n\t\t.vch__legend__wrapper text {\n\t\t\tfont-size: 9px;\n\t\t}\n\n\t\ttext.vch__month__label,\n\t\ttext.vch__day__label,\n\t\t.vch__legend__wrapper text {\n\t\t\tfill: #767676;\n\t\t}\n\n\t\trect.vch__day__square:hover {\n\t\t\tstroke: #555;\n\t\t\tstroke-width: 2px;\n\t\t\tpaint-order: stroke;\n\t\t}\n\n\t\trect.vch__day__square:focus {\n\t\t\toutline: none;\n\t\t}\n\n\t\t&.dark-mode {\n\t\t\ttext.vch__month__label,\n\t\t\ttext.vch__day__label,\n\t\t\t.vch__legend__wrapper text {\n\t\t\t\tfill: #fff;\n\t\t\t}\n\t\t}\n\t}\n\n</style>\n","import { App } from 'vue';\nimport CalendarHeatmap from '@/components/CalendarHeatmap.vue';\n\nfunction install(Vue: App) {\n\tVue.component(CalendarHeatmap.name!, CalendarHeatmap);\n}\n\nexport default { install };\nexport * from '@/components/Heatmap';\nexport { default as CalendarHeatmap } from '@/components/CalendarHeatmap.vue';\n"],"names":["_Heatmap","endDate","values","max","__publicField","day","v","i","len","date","j","dayValues","cal","index","lastWeek","currentWeek","count","numDays","newDate","entry","Heatmap","_sfc_main","defineComponent","props","SQUARE_BORDER_SIZE","SQUARE_SIZE","LEFT_SECTION_WIDTH","RIGHT_SECTION_WIDTH","TOP_SECTION_HEIGHT","BOTTOM_SECTION_HEIGHT","yearWrapperTransform","svg","ref","now","heatmap","width","height","viewbox","legendViewbox","daysLabelWrapperTransform","monthsLabelWrapperTransform","legendWrapperTransform","lo","rangeColor","tooltipUnit","tooltipFormatter","noDataText","vertical","locale","toRefs","tippyInstances","tippySingleton","initTippy","createSingleton","tooltipOptions","getWeekPosition","getDayPosition","getMonthLabelPosition","month","watch","toRef","rc","dm","w","h","l","item","nextTick","onMounted","onBeforeUnmount","initTippyLazy","e","weekIndex","dayIndex","tooltip","instance","tippy","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_16","_hoisted_17","_hoisted_19","_sfc_render","_ctx","darkMode","_openBlock","_createElementBlock","_Fragment","_renderList","_toDisplayString","_createElementVNode","color","round","_normalizeStyle","curRangeColor","_createCommentVNode","_cache","args","week","$event","_hoisted_15","_renderSlot","_hoisted_18","_hoisted_20","install","Vue","CalendarHeatmap"],"mappings":"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"}